{%- assign desktop_image = section.settings.desktop_image -%}
{%- assign mobile_image = section.settings.mobile_image -%}

<picture>
  {%- if mobile_image != blank -%}
    <source
      media="(max-width: 989px)"
      srcset="{{ mobile_image | image_url }}"
      sizes="100vw"
    >
  {%- endif -%}
  {%- if desktop_image != blank -%}
    <source
      media="(min-width: 990px)"
      srcset="{{ desktop_image | image_url }}"
      sizes="100vw"
    >
  {%- endif -%}
  <img
    src="{{ desktop_image | image_url}}"
    alt="{{ desktop_image.alt | escape }}"
    loading="lazy"
    style="width: 100%; height: auto; object-fit: cover;"
    width="{{ desktop_image.width }}"
    height="{{ desktop_image.height }}"
  >
</picture>

{% schema %}
{
  "name": "Responsive Image Section",
  "settings": [
    {
      "type": "image_picker",
      "id": "desktop_image",
      "label": "Desktop Image"
    },
    {
      "type": "image_picker",
      "id": "mobile_image",
      "label": "Mobile Image"
    },
    {
      "type": "text",
      "id": "image_alt",
      "label": "Image Alt Text",
      "default": "Responsive image"
    }
  ],
  "presets": [
    {
      "name": "Responsive Image"
    }
  ]
}
{% endschema %}
